<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>motionPlanner: motionPlanner.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">motionPlanner
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('motion_planner_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">motionPlanner.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_i_d.html">PID</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmotion_profiler.html">motionProfiler</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a0539e40392ac567049e64b8702a1a679"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#a0539e40392ac567049e64b8702a1a679">TRUESPEED_H</a></td></tr>
<tr class="separator:a0539e40392ac567049e64b8702a1a679"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a921a68decd8b7a0286f657e4f2839ff0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#a921a68decd8b7a0286f657e4f2839ff0">NERD_PID_h</a></td></tr>
<tr class="separator:a921a68decd8b7a0286f657e4f2839ff0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56d8cc7537790863f0284e50c4c78ce6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#a56d8cc7537790863f0284e50c4c78ce6">PID_C</a></td></tr>
<tr class="separator:a56d8cc7537790863f0284e50c4c78ce6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a8deb415b6818184cd925709e01f3ea"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#a9a8deb415b6818184cd925709e01f3ea">NERD_MOTIONPLANNER</a></td></tr>
<tr class="separator:a9a8deb415b6818184cd925709e01f3ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad6e45f67f53a6a3eec3fbd3c0e03d9e7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#ad6e45f67f53a6a3eec3fbd3c0e03d9e7">pidInit</a> (<a class="el" href="struct_p_i_d.html">PID</a> pid, float Kp, float Ki, float Kd, float innerIntegralBand, float outerIntegralBand)</td></tr>
<tr class="separator:ad6e45f67f53a6a3eec3fbd3c0e03d9e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3716b050fba96285a13502b79d13795c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#a3716b050fba96285a13502b79d13795c">pidInit</a> (<a class="el" href="struct_p_i_d.html">PID</a> pid, <a class="el" href="struct_p_i_d.html">PID</a> toCopy)</td></tr>
<tr class="separator:a3716b050fba96285a13502b79d13795c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55c32f7660c964a71e288c9efe3a962a"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#a55c32f7660c964a71e288c9efe3a962a">pidCalculate</a> (<a class="el" href="struct_p_i_d.html">PID</a> pid, int setPoint, int processVariable)</td></tr>
<tr class="separator:a55c32f7660c964a71e288c9efe3a962a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea4332a3ded7a93261d8c53e0b83d277"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#aea4332a3ded7a93261d8c53e0b83d277">pidCalculateWithVelocitySet</a> (<a class="el" href="struct_p_i_d.html">PID</a> pid, int setPoint, int processVariable, int velocitySet)</td></tr>
<tr class="separator:aea4332a3ded7a93261d8c53e0b83d277"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb752ade99450cfce2f7e7ad3f80e9c6"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#acb752ade99450cfce2f7e7ad3f80e9c6">pidCalculateVelocity</a> (<a class="el" href="struct_p_i_d.html">PID</a> pid, int setPoint, int processVariable)</td></tr>
<tr class="separator:acb752ade99450cfce2f7e7ad3f80e9c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac842b4b04041e6a1ca5dfbf4e8652bea"><td class="memItemLeft" align="right" valign="top">int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#ac842b4b04041e6a1ca5dfbf4e8652bea">getRawSensor</a> (int port)</td></tr>
<tr class="separator:ac842b4b04041e6a1ca5dfbf4e8652bea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b9b6097dd7e4e65093c30e080a19ef1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#a1b9b6097dd7e4e65093c30e080a19ef1">createMotionProfile</a> (int motorPort, int *sensor, int vMax, float Ka, int t1, int t2, int cycleTime, int positionCycles)</td></tr>
<tr class="separator:a1b9b6097dd7e4e65093c30e080a19ef1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31cfbe0e8576c0a0ea7d6109d092b604"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#a31cfbe0e8576c0a0ea7d6109d092b604">createMotionProfile</a> (int motorPort, int *sensor, int vMax)</td></tr>
<tr class="separator:a31cfbe0e8576c0a0ea7d6109d092b604"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30ce5d795dc46d722f83c97fde8d3198"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#a30ce5d795dc46d722f83c97fde8d3198">setPositionController</a> (int motorPort, float Kp, float Ki, float Kd, float innerBand, float outerBand)</td></tr>
<tr class="separator:a30ce5d795dc46d722f83c97fde8d3198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84c067f5b749396c97f339e18b3916dd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#a84c067f5b749396c97f339e18b3916dd">setVelocityController</a> (int motorPort, float Kp, float Ki, float Kd, float innerBand, float outerBand)</td></tr>
<tr class="separator:a84c067f5b749396c97f339e18b3916dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98a294f0bd0e05a06e4b3ce91fd3b768"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#a98a294f0bd0e05a06e4b3ce91fd3b768">setMotionSlave</a> (int motorPort, int masterPort)</td></tr>
<tr class="separator:a98a294f0bd0e05a06e4b3ce91fd3b768"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14723e38e593eefa92500a993303da0c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#a14723e38e593eefa92500a993303da0c">setPosition</a> (int motorPort, int position)</td></tr>
<tr class="separator:a14723e38e593eefa92500a993303da0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22e3be616dbc3c49d64c1be6c3d912fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#a22e3be616dbc3c49d64c1be6c3d912fa">setPWMOutput</a> (int motorPort, int output)</td></tr>
<tr class="separator:a22e3be616dbc3c49d64c1be6c3d912fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bfe725c4f5986245fba04d84ba9a725"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#a6bfe725c4f5986245fba04d84ba9a725">setVelocity</a> (int motorPort, int velocity)</td></tr>
<tr class="separator:a6bfe725c4f5986245fba04d84ba9a725"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a229bfa76ac5d7171767faff966659a13"><td class="memItemLeft" align="right" valign="top">const unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#a229bfa76ac5d7171767faff966659a13">TrueSpeed</a> [128]</td></tr>
<tr class="separator:a229bfa76ac5d7171767faff966659a13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0aa61a5b536a3d2a6ead32363ae339c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmotion_profiler.html">motionProfiler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#ad0aa61a5b536a3d2a6ead32363ae339c">profilerPool</a> [10]</td></tr>
<tr class="separator:ad0aa61a5b536a3d2a6ead32363ae339c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62e1ed7ee302e5c0fbaad855569d20d2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmotion_profiler.html">motionProfiler</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#a62e1ed7ee302e5c0fbaad855569d20d2">motorController</a> [10]</td></tr>
<tr class="separator:a62e1ed7ee302e5c0fbaad855569d20d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab65ef0e079d87415d63002863f3b878c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmotion_profiler.html">motionProfiler</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#ab65ef0e079d87415d63002863f3b878c">uniqueControllers</a> [10]</td></tr>
<tr class="separator:ab65ef0e079d87415d63002863f3b878c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a228e60e820f1596a54d9bd830adf2fe6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motion_planner_8c.html#a228e60e820f1596a54d9bd830adf2fe6">rawSensorValue</a> [20]</td></tr>
<tr class="separator:a228e60e820f1596a54d9bd830adf2fe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a9a8deb415b6818184cd925709e01f3ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a8deb415b6818184cd925709e01f3ea">&#9670;&nbsp;</a></span>NERD_MOTIONPLANNER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NERD_MOTIONPLANNER</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a921a68decd8b7a0286f657e4f2839ff0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a921a68decd8b7a0286f657e4f2839ff0">&#9670;&nbsp;</a></span>NERD_PID_h</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NERD_PID_h</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a56d8cc7537790863f0284e50c4c78ce6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56d8cc7537790863f0284e50c4c78ce6">&#9670;&nbsp;</a></span>PID_C</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PID_C</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0539e40392ac567049e64b8702a1a679"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0539e40392ac567049e64b8702a1a679">&#9670;&nbsp;</a></span>TRUESPEED_H</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRUESPEED_H</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a1b9b6097dd7e4e65093c30e080a19ef1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b9b6097dd7e4e65093c30e080a19ef1">&#9670;&nbsp;</a></span>createMotionProfile() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void createMotionProfile </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>motorPort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vMax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>Ka</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>t1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>t2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cycleTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>positionCycles</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>create a motion profile for a motor/sensor pair. <a class="el" href="struct_p_i_d.html">PID</a> controllers for the motion profile will be set to default with 0 feedback control and a neutral feedforward gain of 127.0/vMax</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">motorPort</td><td>the motor port to create a profile for </td></tr>
    <tr><td class="paramname">sensor</td><td>a pointer to the sensor value to monitor. This can be a pointer to any integer, or a "raw" sensor value using <a class="el" href="motion_planner_8c.html#ac842b4b04041e6a1ca5dfbf4e8652bea">getRawSensor()</a>. </td></tr>
    <tr><td class="paramname">vMax</td><td>the maximum velocity to use when calculating moves </td></tr>
    <tr><td class="paramname">Ka</td><td>acceleration constant used when ramping up/down velocity during moves </td></tr>
    <tr><td class="paramname">t1</td><td>time to spend at peak acceleration at the beginning/end of a move. This and t2 will determine the shape of the motion curve </td></tr>
    <tr><td class="paramname">t2</td><td>time to spend at peak jerk (time derivative of acceleration) at the beginning/end of acceleration. Time to get from 0 to max velocity (or max to 0) = t1 + 2*t2 </td></tr>
    <tr><td class="paramname">cycleTime</td><td>polling rate/sample period of system. Polling frequency = 1000/cycleTime. Note that ports 2-9 on cortex only can update at a frequency of 18.5Hz, so values less than ~20 here will offer diminishing returns. </td></tr>
    <tr><td class="paramname">positionCycles</td><td>cycles to skip for position updates during moves. This will generally be 3-5 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a31cfbe0e8576c0a0ea7d6109d092b604"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31cfbe0e8576c0a0ea7d6109d092b604">&#9670;&nbsp;</a></span>createMotionProfile() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void createMotionProfile </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>motorPort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vMax</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>create a motion profile for a motor/sensor pair using default timing settings and a Ka of 0. This will provide simple feedforward position/velocity control</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">motorPort</td><td>the motor port to create a profile for </td></tr>
    <tr><td class="paramname">sensor</td><td>a pointer to the sensor value to monitor. This can be a pointer to any integer, or a "raw" sensor value using <a class="el" href="motion_planner_8c.html#ac842b4b04041e6a1ca5dfbf4e8652bea">getRawSensor()</a>. </td></tr>
    <tr><td class="paramname">vMax</td><td>the maximum velocity to use when calculating moves </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac842b4b04041e6a1ca5dfbf4e8652bea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac842b4b04041e6a1ca5dfbf4e8652bea">&#9670;&nbsp;</a></span>getRawSensor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int* getRawSensor </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>return a pointer to a ROBOTC sensor</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>the sensor value to get a pointer to</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the pointer to the sensor value </dd></dl>

</div>
</div>
<a id="a55c32f7660c964a71e288c9efe3a962a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55c32f7660c964a71e288c9efe3a962a">&#9670;&nbsp;</a></span>pidCalculate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float pidCalculate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_p_i_d.html">PID</a>&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>setPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>processVariable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>calculate pid output</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>instance of <a class="el" href="struct_p_i_d.html">PID</a> structure </td></tr>
    <tr><td class="paramname">setPoint</td><td>set point of <a class="el" href="struct_p_i_d.html">PID</a> controller </td></tr>
    <tr><td class="paramname">processVariable</td><td>sensor/feedback value</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>output value of the control loop </dd></dl>

</div>
</div>
<a id="acb752ade99450cfce2f7e7ad3f80e9c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb752ade99450cfce2f7e7ad3f80e9c6">&#9670;&nbsp;</a></span>pidCalculateVelocity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float pidCalculateVelocity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_p_i_d.html">PID</a>&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>setPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>processVariable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>calculate <a class="el" href="struct_p_i_d.html">PID</a> output for velocity control using feedforward instead of an error calculation, but still allowing for I and D components.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>the <a class="el" href="struct_p_i_d.html">PID</a> controller to use for the calculation </td></tr>
    <tr><td class="paramname">setPoint</td><td>the set point of the system </td></tr>
    <tr><td class="paramname">processVariable</td><td>the value of the feedback sensor in the system</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the output value of the control loop </dd></dl>

</div>
</div>
<a id="aea4332a3ded7a93261d8c53e0b83d277"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea4332a3ded7a93261d8c53e0b83d277">&#9670;&nbsp;</a></span>pidCalculateWithVelocitySet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float pidCalculateWithVelocitySet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_p_i_d.html">PID</a>&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>setPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>processVariable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>velocitySet</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>calculate <a class="el" href="struct_p_i_d.html">PID</a> output while velocity control is active. The velocity set point will be subtracted from the time derivative of the error</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>the <a class="el" href="struct_p_i_d.html">PID</a> controller to use for the calculation </td></tr>
    <tr><td class="paramname">setPoint</td><td>the set point of the system </td></tr>
    <tr><td class="paramname">processVariable</td><td>the value of the feedback sensor in the system </td></tr>
    <tr><td class="paramname">velocitySet</td><td>the velocity set point of the system</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the output value of the control loop </dd></dl>

</div>
</div>
<a id="ad6e45f67f53a6a3eec3fbd3c0e03d9e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6e45f67f53a6a3eec3fbd3c0e03d9e7">&#9670;&nbsp;</a></span>pidInit() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pidInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_p_i_d.html">PID</a>&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>Kp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>Ki</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>Kd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>innerIntegralBand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>outerIntegralBand</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>initialize pid structure, set parameters</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>instance of <a class="el" href="struct_p_i_d.html">PID</a> structure </td></tr>
    <tr><td class="paramname">Kp</td><td><a class="el" href="struct_p_i_d.html">PID</a> Kp constant </td></tr>
    <tr><td class="paramname">Ki</td><td><a class="el" href="struct_p_i_d.html">PID</a> Ki constant </td></tr>
    <tr><td class="paramname">Kd</td><td><a class="el" href="struct_p_i_d.html">PID</a> Kd constant </td></tr>
    <tr><td class="paramname">innerIntegralBand</td><td>inner bound of <a class="el" href="struct_p_i_d.html">PID</a> I summing cutoff </td></tr>
    <tr><td class="paramname">outerIntegralBand</td><td>outer bound of <a class="el" href="struct_p_i_d.html">PID</a> I summing cutoff </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3716b050fba96285a13502b79d13795c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3716b050fba96285a13502b79d13795c">&#9670;&nbsp;</a></span>pidInit() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pidInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_p_i_d.html">PID</a>&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_p_i_d.html">PID</a>&#160;</td>
          <td class="paramname"><em>toCopy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>initialize pid structure, set parameters based on another <a class="el" href="struct_p_i_d.html">PID</a> structure</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>instance of <a class="el" href="struct_p_i_d.html">PID</a> structure </td></tr>
    <tr><td class="paramname">toCopy</td><td><a class="el" href="struct_p_i_d.html">PID</a> instance to copy settings from </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a98a294f0bd0e05a06e4b3ce91fd3b768"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98a294f0bd0e05a06e4b3ce91fd3b768">&#9670;&nbsp;</a></span>setMotionSlave()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setMotionSlave </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>motorPort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>masterPort</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>set a motor to copy another motor's motion profile and mirror its output value</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">motorPort</td><td>the motor to have mirror another motor </td></tr>
    <tr><td class="paramname">masterPort</td><td>the motor to mirror </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a14723e38e593eefa92500a993303da0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14723e38e593eefa92500a993303da0c">&#9670;&nbsp;</a></span>setPosition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setPosition </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>motorPort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>position</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>issue a move command to the specified position. This will currently do nothing if the move is considered to be a "short move", ie. the motor is unable to fully ramp up to max velocity during the move. Note that this is an absolute position command, so two consecutive moves to 4000 are not equivalent to a single move to 8000.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">motorPort</td><td>the motor to issue the move command to </td></tr>
    <tr><td class="paramname">position</td><td>the position to move to </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a30ce5d795dc46d722f83c97fde8d3198"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30ce5d795dc46d722f83c97fde8d3198">&#9670;&nbsp;</a></span>setPositionController()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setPositionController </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>motorPort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>Kp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>Ki</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>Kd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>innerBand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>outerBand</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>set the position <a class="el" href="struct_p_i_d.html">PID</a> controller for the specified motor's motion profile</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">motorPort</td><td>the motor to update </td></tr>
    <tr><td class="paramname">Kp</td><td>proportional gain </td></tr>
    <tr><td class="paramname">Ki</td><td>integral gain </td></tr>
    <tr><td class="paramname">Kd</td><td>derivative gain </td></tr>
    <tr><td class="paramname">innerBand</td><td>the inner integral deadBand value </td></tr>
    <tr><td class="paramname">outerBand</td><td>the outer integral deadBand value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a22e3be616dbc3c49d64c1be6c3d912fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22e3be616dbc3c49d64c1be6c3d912fa">&#9670;&nbsp;</a></span>setPWMOutput()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setPWMOutput </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>motorPort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>set a motor's output to a value from -127 to 127</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">motorPort</td><td>the motor to set the output value of </td></tr>
    <tr><td class="paramname">output</td><td>output value to set </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6bfe725c4f5986245fba04d84ba9a725"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bfe725c4f5986245fba04d84ba9a725">&#9670;&nbsp;</a></span>setVelocity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setVelocity </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>motorPort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>velocity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>set a motor's velocity to the specified value</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">motorPort</td><td>the motor to set </td></tr>
    <tr><td class="paramname">velocity</td><td>desired velocity </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a84c067f5b749396c97f339e18b3916dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84c067f5b749396c97f339e18b3916dd">&#9670;&nbsp;</a></span>setVelocityController()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setVelocityController </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>motorPort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>Kp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>Ki</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>Kd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>innerBand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>outerBand</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>set the velocity <a class="el" href="struct_p_i_d.html">PID</a> controller for the specified motor's motion profile</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">motorPort</td><td>the motor to update </td></tr>
    <tr><td class="paramname">Kp</td><td>proportional gain </td></tr>
    <tr><td class="paramname">Ki</td><td>integral gain </td></tr>
    <tr><td class="paramname">Kd</td><td>derivative gain </td></tr>
    <tr><td class="paramname">innerBand</td><td>the inner integral deadBand value </td></tr>
    <tr><td class="paramname">outerBand</td><td>the outer integral deadBand value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a62e1ed7ee302e5c0fbaad855569d20d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62e1ed7ee302e5c0fbaad855569d20d2">&#9670;&nbsp;</a></span>motorController</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmotion_profiler.html">motionProfiler</a>* motorController[10]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad0aa61a5b536a3d2a6ead32363ae339c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0aa61a5b536a3d2a6ead32363ae339c">&#9670;&nbsp;</a></span>profilerPool</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmotion_profiler.html">motionProfiler</a> profilerPool[10]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a228e60e820f1596a54d9bd830adf2fe6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a228e60e820f1596a54d9bd830adf2fe6">&#9670;&nbsp;</a></span>rawSensorValue</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rawSensorValue[20]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a229bfa76ac5d7171767faff966659a13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a229bfa76ac5d7171767faff966659a13">&#9670;&nbsp;</a></span>TrueSpeed</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned int TrueSpeed[128]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div><div class="line">{</div><div class="line">  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,</div><div class="line">  0, 21, 21, 21, 22, 22, 22, 23, 24, 24,</div><div class="line"> 25, 25, 25, 25, 26, 27, 27, 28, 28, 28,</div><div class="line"> 28, 29, 30, 30, 30, 31, 31, 32, 32, 32,</div><div class="line"> 33, 33, 34, 34, 35, 35, 35, 36, 36, 37,</div><div class="line"> 37, 37, 37, 38, 38, 39, 39, 39, 40, 40,</div><div class="line"> 41, 41, 42, 42, 43, 44, 44, 45, 45, 46,</div><div class="line"> 46, 47, 47, 48, 48, 49, 50, 50, 51, 52,</div><div class="line"> 52, 53, 54, 55, 56, 57, 57, 58, 59, 60,</div><div class="line"> 61, 62, 63, 64, 65, 66, 67, 67, 68, 70,</div><div class="line"> 71, 72, 72, 73, 74, 76, 77, 78, 79, 79,</div><div class="line"> 80, 81, 83, 84, 84, 86, 86, 87, 87, 88,</div><div class="line"> 88, 89, 89, 90, 90,127,127,127</div><div class="line">}</div></div><!-- fragment --><p>TrueSpeed lookup table maps linear motor input to logarithmic motor output in order to improve motor control </p>

</div>
</div>
<a id="ab65ef0e079d87415d63002863f3b878c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab65ef0e079d87415d63002863f3b878c">&#9670;&nbsp;</a></span>uniqueControllers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmotion_profiler.html">motionProfiler</a>* uniqueControllers[10]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="motion_planner_8c.html">motionPlanner.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
